(()=>{"use strict";(()=>{function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function r(t){for(var r=1;r<arguments.length;r++){var a=null!=arguments[r]?arguments[r]:{};r%2?e(Object(a),!0).forEach((function(e){n(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):e(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var a,o=(a=1,function(){return a+=1}),i=function(t,e){return{message:t,type:e,id:o()}},c=function(t,e){return r(r(r({},i(t,"bot")),e),{},{loading:!0})},s=function(t){return i(t,"user")},l=function(){var t=document.querySelector(".vanilla-chatbot-kit-chat-message-container");t.scrollTop=t.scrollHeight};function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function d(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function p(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?d(Object(r),!0).forEach((function(e){f(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function f(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var b=function(t){var e=document.createElement("div");e.classList.add("vanilla-chatbot-kit-user-chat-message-container");var r=document.createElement("div");r.classList.add("vanilla-chatbot-kit-user-avatar-container");var n=document.createElement("img");n.classList.add("vanilla-chatbot-kit-user-avatar-icon"),n.src="/assets/icons/user-alt.svg",n.alt="user";var a=document.createElement("div");a.classList.add("vanilla-chatbot-kit-user-chat-message"),a.textContent=t;var o=document.createElement("div");return o.classList.add("vanilla-chatbot-kit-user-chat-message-arrow"),a.appendChild(o),r.appendChild(n),e.appendChild(a),e.appendChild(r),e},m=function(t,e,r,n){var a=t.message,o=t.widget,i=t.loading,c=t.id;console.log(t);var s=document.createElement("div"),l=document.createElement("div");l.classList.add("vanilla-chatbot-kit-chat-bot-message-container");var u=document.createElement("div");u.classList.add("vanilla-chatbot-kit-chat-bot-avatar-container");var d=document.createElement("p");d.textContent="B",d.classList.add("vanilla-chatbot-kit-chat-bot-avatar-letter");var p=document.createElement("div");if(p.classList.add("vanilla-chatbot-kit-chat-bot-message"),i){var f=h();p.appendChild(f),setTimeout((function(){n((function(t){return t.messages.find((function(t){return t.id===c})).loading=!1,t}))}),750)}else p.textContent=a;var b=document.createElement("div");b.classList.add("vanilla-chatbot-kit-chat-bot-message-arrow"),p.appendChild(b),u.appendChild(d),l.appendChild(u),l.appendChild(p),s.appendChild(l);var m=document.createElement("div");if(o){var v=e.getWidget(o,r);m.appendChild(v)}return s.appendChild(m),s},h=function(){var t=document.createElement("div");return t.classList.add("chatbot-loader-container"),t.innerHTML='<svg\n        id="dots"\n        width="50px"\n        height="21px"\n        viewBox="0 0 132 58"\n        version="1.1"\n        xmlns="http://www.w3.org/2000/svg"\n      >\n        <g stroke="none" fill="none">\n          <g id="chatbot-loader" fill="#fff">\n            <circle id="chatbot-loader-dot1" cx="25" cy="30" r="13"></circle>\n            <circle id="chatbot-loader-dot2" cx="65" cy="30" r="13"></circle>\n            <circle id="chatbot-loader-dot3" cx="105" cy="30" r="13"></circle>\n          </g>\n        </g>\n      </svg>',t};const v=function(t,e,r,n,a){var o=document.createElement("div");o.classList.add("vanilla-chatbot-kit-chat-container");var i=document.createElement("div");return i.classList.add("vanilla-chatbot-kit-chat-inner-container"),i.appendChild(function(t){var e=document.createElement("div");return e.textContent="Conversation with ".concat(t.botName),e.classList.add("vanilla-chatbot-kit-chat-header"),e}(t)),i.appendChild(function(t,e,r,n){var a=document.createElement("div");return a.classList.add("vanilla-chatbot-kit-chat-message-container"),t.forEach((function(t){var o=t.message;if("bot"===t.type){var i=m(t,e,r,n);a.appendChild(i)}else{var c=b(o);a.appendChild(c)}})),a}(e.messages,a,e,n)),i.appendChild(function(t,e){var r=document.createElement("div");r.classList.add("vanilla-chatbot-kit-chat-input-container");var n=document.createElement("form");n.classList.add("vanilla-chatbot-kit-chat-input-form");var a=document.createElement("input");a.classList.add("vanilla-chatbot-kit-chat-input"),a.placeholder="Write your message here";var o=document.createElement("button");o.classList.add("vanilla-chatbot-kit-chat-btn-send"),n.onsubmit=function(r){r.preventDefault();var n=a.value,o=s(n);e((function(t){return p(p({},t),{},{messages:[].concat((e=t.messages,function(t){if(Array.isArray(t))return u(t)}(e)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(t,e):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[o])});var e})),t.parse(n),a.value=""};var i=document.createElement("img");return i.src="/assets/icons/paper-plane.svg",i.alt="paper plane",i.classList.add("vanilla-chatbot-kit-chat-btn-send-icon"),o.appendChild(i),n.appendChild(a),n.appendChild(o),r.appendChild(n),r}(r,n)),o.appendChild(i),o};function y(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function g(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?y(Object(r),!0).forEach((function(e){O(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function O(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const j=function(t){var e=t,r=[];return[e,function(t){e="function"==typeof t?t(e):g(g({},e),t),r.forEach((function(t){t(e)}))},function(t){r.push(t)}]};function w(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function P(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?w(Object(r),!0).forEach((function(e){C(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function C(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}const E=function e(r,n){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),C(this,"addWidget",(function(t){var e=t.widgetName,r=t.widgetFunc,n=t.mapStateToProps,o=t.props;console.log("ADDING WIDGET",e),a[e]={widget:r,props:o,mapStateToProps:n}})),C(this,"getWidget",(function(e,r){var n=a[e];if(n){var o,i=P(P(P({scrollIntoView:l},"object"===t(o=n.props)?o:{}),a.mapStateToProps(n.mapStateToProps,r)),{},{setState:a.setState,actionProvider:a.actionProvider});return n.widget(i)}})),C(this,"mapStateToProps",(function(t,e){if(t)return t.reduce((function(t,r){return t[r]=e[r],t}),{})})),this.setState=r,this.actionProvider=n};function S(t,e){if(t){if("string"==typeof t)return k(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?k(t,e):void 0}}function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function D(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function L(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var A,x=function(t,e){A&&t.removeChild(A);var r=function(t){var e=document.createElement("div");e.classList.add("vanilla-chatbot-kit-error");var r=document.createElement("h1");r.textContent="Ooops. Something is missing.";var n=document.createElement("div");n.classList.add("vanilla-chatbot-kit-error-container");var a=m({message:t,loading:!1,id:1});n.appendChild(a);var o=document.createElement("a");return o.href="https://fredrikoseberg.github.io/react-chatbot-kit-docs/",o.rel="noopener norefferer",o.target="_blank",o.classList.add("vanilla-chatbot-kit-error-docs"),o.textContent="View the docs",e.appendChild(r),e.appendChild(n),e.appendChild(o),e}(e);t.appendChild(r)},T=function(t,e,r,n,a,o){A&&t.removeChild(A);var i=v(n,e,r,a,o);A=i,t.appendChild(i),document.querySelector(".vanilla-chatbot-kit-chat-input").focus(),l()};window.vanillaJsChatbot={renderChatbot:function(t,e,r,n){if(!e||!r||!n)return x(t,"I think you forgot to feed me some props. Did you remember to pass a config, a messageparser and an actionprovider?");var a=function(t,e){var r=[];return t.initialMessages||r.push("Config must contain property 'initialMessages', and it expects it to be an array of chatbotmessages."),(new e).parse||r.push("Messageparser must implement the method 'parse', please add this method to your object. The signature is parse(message: string)."),r}(e,r);if(a.length){var o=a.reduce((function(t,e){return t+e}),"");return x(t,o)}var i,l=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?D(Object(r),!0).forEach((function(e){L(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({messages:(i=e.initialMessages,function(t){if(Array.isArray(t))return k(t)}(i)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(i)||S(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())},e.state),u=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,a=!1,o=void 0;try{for(var i,c=t[Symbol.iterator]();!(n=(i=c.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(t){a=!0,o=t}finally{try{n||null==c.return||c.return()}finally{if(a)throw o}}return r}}(t,e)||S(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(j(l),3),d=u[0],p=u[1],f=u[2],b=new n(c,p,s),m=new r(b),h=new E(p,b);(function(t){return t.widgets?t.widgets:[]})(e).forEach((function(t){return h.addWidget(t)})),f((function(r){return T(t,r,m,e,p,h)})),T(t,d,m,e,p,h)},createChatBotMessage:c}})()})();